## 01 영화 예매 시스템

**용어 정리**

영화 : 영화에 대한 기본 정보

상영 : 실제로 관객들이 영화를 관람하는 사건을 표현.

할인 규칙

1) 할인 조건  : 가격의 할인 여부를 결정

- 순서 조건 : 상영 순번을 이용해 할인 여부를 결정하는 조건
- 기간 조건 : 영화 상영 시작 시간을 이용해 할인 여부를 결정하는 조건

2) 할인 정책  : 할인 요금을 결정

- 금액 할인 정책 : 예매 요금에서 일정 금액을 할인해주는 방식
- 비율 할인 정책 : 정가에서 일정 비율의 요금을 할인해 주는 방식

## 02 객체지향 프로그래밍을 향해

객체 지향은 객체를 지향하는 것.

객체 지향을 지향하기 위해 집중해야할 2가지

1) 어떤 클래스가 필요한지를 고민하기 전에 어떤 객체들이 필요한지 고민하라.

→ 어떤 객체들이 어떤 상태와 행동을 가지는지를 먼저 결정해야 한다.

2) 객체를 독립적인 존재가 아니라 기능을 구현하기 위해 협력하는 공동체의 일원으로 봐야 한다.

→ 객체들의 모양과 윤곽이 잡히면 공통된 특성과 상태를 가진 객체들을 타입으로 분류하고 이 타입을 기반으로 클래스를 구현하라. 훌륭한 협력이 훌륭한 객체를 낳고 훌륭한 객체가 훌륭한 클래스를 낳는다.

도메인 : 문제를 해결하기 위해 사용자가 프로그램을 사용하는 분야.

클래스의 경계를 구분 지어야한다. → 이유 : 경계의 명확성이 객체의 자율성을 보장하기 때문이다.

객체는?

1) 상태(state) + 행동(behavior)이 함께 존재하는 복헙적인 존재이다.

2) 스스로 판단하고 행동하는 자율적인 존재이다.

특징

- 캡슐화 : 데이터와 기능을 객체 내부로 함께 묶는 것.
- 접근 제어(access control) : 외부에서의 접근을 통제할 수 있는 접근 제어 메커니즘도 함께 제공한다.  ex)  접근 제어자(public, private, …)

객체가 스스로 상태를 관리하고, 판단하고, 행동하도록 해야하며, 객체에게 원하는 것이 있다면 요청하는 형식이 되어야한다.

- 협력 : 객체들 사이에 이뤄지는 상호작용.

협력은 요청과 응답으로 이루어져 있으며, 메시지를 전송 하거나 메세지를 수신하는 방식으로 이루어진다. 이처럼 수신된 메세지를 처리하기 위한 자신만의 방식을 **메서드(Method)**라고 한다.

- 메시지를 전송하다 vs 메서드
    - Screening이 Movie의 calculateMovieFee 를 호출한다. → 메세지를 전송한다.가 더 적절하다.
    - Screening은 Movie안에 calculateMovieFee 메서드가 존재하는 것을 모르고 있으며, 단지 Movie가 caculateMovieFee메시지에 응답할 수 있다고 믿고 메세지를 전송할 뿐이기 때문.

### 03 할인 요금 구하기

- 추상화, 상속, 다형성 개념
- 템플릿 메서드 패턴

  : 부모 클래스에서 기본적인 알고리즘 흐름을 구현하고 중간에 필요한 처리를 자식에게 위임하는 디자인 패턴을 말한다.


**오버로딩 vs 오버라이딩**

오버라이딩(override) - 부모 클래스에 정의된 같으 ㄴ이름, 같은 파라미터 목록을 가진 메서드를 자식클래스에서 재정의하는 경우

오버로딩(overload) - 메서드의 이름은 같지만 제공되는 파라미터의 목록이 다르다.

생성자의 파라미터 목록을 이용해 초기화에 필요한 정보를 강제하면 올바른 상태를 가진 객체의 생성을 보장할 수 있다.

### 04 상속과 다형성

- 상속 예시 : DiscountPolicy(상위) 와 AmountDiscountPolicy(하위), PercentDiscountPolicy(하위)
- 다형성 예시 : Movie가 사용하는 DiscountPolicy는 하위 클래스에 의존하는 것이 아닌, 추상 클래스인 DiscountPolicy에 의존.
- 설계가 유연해질수록 코드를 이해하고 디버깅하기는 어려워진다.
  따라서, 항상 유연성과 가독성 사이에서 고민해야한다.
- 차이에 의한 프로그래밍(programming by difference) : 부모 클래스와 다른 부분만을 추가해서 새로운 클래스를 쉽고 빠르게 만드는 방법을 칭하는 말.
- 업캐스팅(Upcasting) : 자식 클래스가 부모 클래스를 대신하는 것.

### 05 추상화와 유연성

추상화의 장점 2가지

1) 요구사항의 정책을 높은 수준에서 서술할 수 있다는 것.

2) 추상화를 이용하면 설계가 좀 더 유연해진다는 것.

- 추상화를 사용하는 것은 구현과 관련된 모든 것들이 트레이드 오프 대상이 될 수 있다.

코드 재사용

- 코드 재사용을 위해서는 상솝ㄱ보다는 합성이 더 좋은 방법이란 이야기를 많이 들었을 것이다.
    - 합성(composition) : 다른 객체의 인스턴스를 자신의 인스턴스 변수로 포함해서 재사용하는 방법.

상속

- 다음 두가지 관점에서 설계에 좋지 않는 영향을 끼친다.
    - 캡슐화 위반 : 자식 클래스가 부모클래스에 강하게 결합되도록 만들기 때문에 부모클래스 변경시에 자식 클래스도 함께 변경될 가능성이 크다.
    - 설계가 유현하지 못함 : 부모 자식 사이의 관계를 컴파일 시점에 결정하여 실행 시점에 객체 종류를 변경하는 것을 하지 못함.
